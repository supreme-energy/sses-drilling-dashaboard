image: experoinc/ci-frontend-node8

pipelines:
  pull-requests:
    '**': #this runs as default for any branch not elsewhere defined
      - step:
          name: Build and test
          caches:
            - node
          script:
            - yarn
            - yarn run lint
            - yarn run build
  branches:
    'master':
      - step:
          name: Build and test
          caches:
            - node
          script:
            - yarn
            - yarn run lint
            - yarn run build
    'develop':
      - step:
          name: Build and test
          caches:
            - node
          script:
            - yarn
            - yarn run lint
            - yarn run build
      - step:
          name: Deploy
          deployment: test
          caches:
            - node
          script:
            - yarn run upload